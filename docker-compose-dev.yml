version: '3.8'

services:
  image-processor:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: image-processor-service
    restart: unless-stopped
    volumes:
      - ./logs:/app/logs
    environment:
      # Puedes sobrescribir cualquier variable de entorno aqu√≠
      RABBITMQ_SERVERS: "amqp://admin:admin123@86.48.26.221:5672"
      DEBUG: "true"
      MAX_WORKERS: "6"
    networks:
      - elastika-network
    # Depender de RabbitMQ si lo ejecutas localmente
    # depends_on:
    #   - rabbitmq

  # Descomenta si necesitas ejecutar RabbitMQ localmente
  # rabbitmq:
  #   image: rabbitmq:3-management
  #   container_name: rabbitmq
  #   ports:
  #     - "5672:5672"
  #     - "15672:15672"
  #   environment:
  #     RABBITMQ_DEFAULT_USER: jtorres
  #     RABBITMQ_DEFAULT_PASS: jtorres159.
  #   volumes:
  #     - rabbitmq_data:/var/lib/rabbitmq
  #   networks:
  #     - processor-network

networks:
  elastika-network:
    driver: bridge

# Volumes para persistencia
volumes:
  rabbitmq_data: